<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>$(title)</title>
    <link rel="stylesheet" href="?f=docs.min.css" charset="utf-8">
    <script src="?f=pace.min.js" charset="utf-8"></script>
</head>

<body>
    <textarea id="meta" hidden style="display:none">$(meta)</textarea>

    <div id="app" class="container">
        <section class="sidebar" v-show="sidebar">
            <ul style="display:none;" v-show="meta">
                <li><a href="#" @click="showBasic">Desc</a></li>
                <li><a href="#" @click="showMeta">Meta</a></li>
                <li>
                    <a href="#">Roles</a>
                    <ul>
                        <li v-for="(item,role) in roles">
                            <a href="#" @click="showRole(role)">{{role}}</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">Resources</a>
                    <ul>
                        <li v-for="(item,resource) in resources">
                            <a href="#" @click="showResource(resource)">{{resource}}</a>
                            <ul>
                                <li v-for="(__,action) in item" v-if="!isSpecial(action)">
                                    <a :href="'#'+resource+'.'+action" @click="showResource(resource)">{{action}}</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </section>
        <div class="content" @click="hideSidebar">
            <nav class="toolbar">
                <a href="#" @click.stop="toggleTerminal"><i class="iconfont icon-terminal"></i></a>
                <a href="#" @click.stop="toggleSidebar" class="show-on-mobile"><i class="iconfont icon-index"></i></a>
            </nav>
            <section style="display:none;" v-if="meta" v-show="view=='meta'">
                <h3>Meta</h3>
                <pre>{{meta}}</pre>
            </section>
            <section style="display:none;" v-if="basic" v-show="view=='basic'">
                <div v-marked="basic.$desc"></div>
                <h3>Auth</h3>
                <pre>{{basic.$auth|json}}</pre>
                <template v-if="!isEmpty(basic.$shared)">
                  <h4>Shared Schema</h4>
                  <pre>{{basic.$shared}}</pre>
                </template>
            </section>
            <section style="display:none;" class="section-role" v-if="role" v-show="view=='role'">
                <h3>{{roleName}}</h3>
                <table>
                    <tr v-for="(item,resource) in role">
                        <td class="role-resource">{{resource}}</td>
                        <td v-for="(info,action) in item" class="role-item">
                            <div class="role-item-title">
                                <i class="iconfont" :class="{'icon-allow':info.allow, 'icon-block':!info.allow}"></i>
                                <span>{{action}}</span>
                            </div>
                            <div class="role-item-desc">{{info.desc}}</div>
                        </td>
                    </tr>
                </table>
            </section>
            <section style="display:none;" v-if="resource" v-show="view=='resource'">
                <h1>{{resourceName}}</h1>
                <p>
                    {{resource.$desc}}
                </p>
                <template v-if="!isEmpty(resource.$shared)">
                  <h4>资源内共享的数据结构</h4>
                  <pre>{{resource.$shared}}</pre>
                </template>
                <template v-for="(item,action) in resource" v-if="!isSpecial(action)">
                    <h3 :id="resourceName+'.'+action">{{action}}</h3>
                    <p>{{item.$desc}}</p>
                    <p>输入</p>
                    <pre>{{item.$input?item.$input:'无'|json}}</pre>
                    <p>输出</p>
                    <pre>{{item.$output?item.$output:'无'|json}}</pre>
                    <template v-if="item.$error">
                      <p>错误</p>
                      <pre >{{item.$error|json}}</pre>
                    </template>
                </template>
            </section>
        </div>
    </div>
    <script src="?f=vue.min.js" charset="utf-8"></script>
    <script src="?f=marked.min.js" charset="utf-8"></script>
    <script src="?f=alertify.min.js" charset="utf-8"></script>
    <script src="?f=docs.min.js" charset="utf-8"></script>
    <script src="$(res.js)" charset="utf-8"></script>
</body>

</html>
